<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-08-31 Wed 18:52 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Python</title>
<meta name="author" content="Honbey Zhang" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="../resources/orgmode.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/style.css" type="text/css"/>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">Python</h1>
</header>
<div id="outline-container-org178a3ed" class="outline-2">
<h2 id="org178a3ed">Some Useful Modules</h2>
<div class="outline-text-2" id="text-org178a3ed">
</div>
<div id="outline-container-orgd66d841" class="outline-3">
<h3 id="orgd66d841">numpy - Scientific calculation</h3>
<div class="outline-text-3" id="text-orgd66d841">
<p>
Numpy remove scientific notation:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">!/usr/env/bin python</span>
<span style="color: #0000FF;">import</span> numpy <span style="color: #0000FF;">as</span> np
np.set_printoptions(suppress=<span style="color: #D0372D;">True</span>, formatter={
    <span style="color: #008000;">'float_kind'</span>: <span style="color: #008000;">'{:0.1f}'</span>.<span style="color: #006FE0;">format</span>
})
</pre>
</div>
</div>
</div>
<div id="outline-container-org4055055" class="outline-3">
<h3 id="org4055055">sqlaichemy - <a href="20220821-database.html#ID-787cf0fd-8725-403d-b115-a26c87d7dfcc">ORM</a></h3>
</div>

<div id="outline-container-orga1c7342" class="outline-3">
<h3 id="orga1c7342">re - <a href="20220820-regex.html#ID-36c84656-c086-40fc-9d40-a9181c4b7dc5">Regex</a>p</h3>
</div>

<div id="outline-container-org3bce16d" class="outline-3">
<h3 id="org3bce16d">seleium - Headless browser</h3>
<div class="outline-text-3" id="text-org3bce16d">
<p>
Selenium use specific browser:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #0000FF;">from</span> selenium <span style="color: #0000FF;">import</span> webdriver

<span style="color: #BA36A5;">driver_path</span> = <span style="color: #008000;">"C:/Users/username/PycharmProjects/chromedriver.exe"</span>
<span style="color: #BA36A5;">brave_path</span> = <span style="color: #008000;">"C:/Program Files (x86)/BraveSoftware/Brave-Browser/Application/brave.exe"</span>

<span style="color: #BA36A5;">option</span> = webdriver.ChromeOptions()
option.<span style="color: #BA36A5;">binary_location</span> = brave_path
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">option.add_argument("--incognito") OPTIONAL</span>
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">option.add_argument("--headless") OPTIONAL</span>

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">Create new Instance of Chrome</span>
<span style="color: #BA36A5;">browser</span> = webdriver.Chrome(executable_path=driver_path, chrome_options=option)

browser.get(<span style="color: #008000;">"https://www.baidu.com"</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge3ffa53" class="outline-2">
<h2 id="orge3ffa53">Dict</h2>
<div class="outline-text-2" id="text-orge3ffa53">
</div>
<div id="outline-container-org929e9d2" class="outline-3">
<h3 id="org929e9d2">Seven method to merge dictionary in Python</h3>
<div class="outline-text-3" id="text-org929e9d2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #BA36A5;">a</span>, <span style="color: #BA36A5;">b</span> = {<span style="color: #008000;">'a'</span>: <span style="color: #D0372D;">1</span>}, {<span style="color: #008000;">'b'</span>: <span style="color: #D0372D;">2</span>}
</pre>
</div>
<ol class="org-ol">
<li><p>
update()
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #0000FF;">from</span> copy <span style="color: #0000FF;">import</span> deepcopy
<span style="color: #BA36A5;">ab</span> = deepcopy(a)
ab.update(b)
</pre>
</div></li>
<li><p>
use <code>**</code> to destruct
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #BA36A5;">ab</span> = {**a, **b}
</pre>
</div></li>
<li><p>
itertools
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #0000FF;">import</span> itertools
<span style="color: #BA36A5;">ab</span> = <span style="color: #006FE0;">dict</span>(itertools.chain(a.items(), b.items()))
</pre>
</div></li>
<li><p>
ChainMap
This method will not update the value of same key.
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #0000FF;">from</span> collections <span style="color: #0000FF;">import</span> ChainMap
<span style="color: #BA36A5;">ab</span> = <span style="color: #006FE0;">dict</span>(ChainMap(a, b))
</pre>
</div></li>
<li><p>
dict.items()
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #BA36A5;">ab</span> = <span style="color: #006FE0;">dict</span>(a.items() | b.items())
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">or</span>
<span style="color: #BA36A5;">ab</span> = <span style="color: #006FE0;">dict</span>(<span style="color: #006FE0;">list</span>(a.items() + <span style="color: #006FE0;">list</span>(b.items())))
</pre>
</div></li>
<li><p>
Pythonnic
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #BA36A5;">ab</span> = {k:v <span style="color: #0000FF;">for</span> d <span style="color: #0000FF;">in</span> [a, b] <span style="color: #0000FF;">for</span> k, v <span style="color: #0000FF;">in</span> d.items()}
</pre>
</div></li>
<li><p>
Python 3.9
Example:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #BA36A5;">ab</span> = a | b
</pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org0c4175a" class="outline-2">
<h2 id="org0c4175a"><a href="20220708-information_security.html#ID-f206c9e0-f8d8-4b31-b74e-449365305a46">Information Security</a></h2>
<div class="outline-text-2" id="text-org0c4175a">
</div>
<div id="outline-container-orgd8a109e" class="outline-3">
<h3 id="orgd8a109e">Avoid Directory Traversal Vulnerability&#xa0;&#xa0;&#xa0;<span class="tag"><span class="security">security</span></span></h3>
<div class="outline-text-3" id="text-orgd8a109e">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">!/usr/env/bin python</span>
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">https://github.com/streamlit/streamlit/commit/80d9979d5f4a00217743d607078a1d867fad8acf</span>
<span style="color: #0000FF;">import</span> os

<span style="color: #BA36A5;">app_root</span> = <span style="color: #008000;">'/data/app'</span>
<span style="color: #BA36A5;">filename</span> = <span style="color: #008000;">'../../etc/passwd'</span>

<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">abspath = os.path.join(app_root, filename)</span>
<span style="color: #BA36A5;">abspath</span> = os.path.realpath(os.path.join(app_root, filename))

<span style="color: #0000FF;">if</span> os.path.commonprefix([app_root, abspath]) != app_root:
    <span style="color: #006FE0;">print</span>(<span style="color: #008000;">'403 forbidden'</span>)
<span style="color: #0000FF;">else</span>:
    <span style="color: #006FE0;">print</span>(abspath)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org11879e4" class="outline-2">
<h2 id="org11879e4">playground</h2>
<div class="outline-text-2" id="text-org11879e4">
<div class="org-src-container">
<pre class="src src-python-jit">print('Hello world')
</pre>
</div>
<div class="klipsify div" id="org7c00da5">
<script>window.klipse_settings = {selector_eval_python_client: '.src-python-jit',};</script>
<script src="https://storage.googleapis.com/app.klipse.tech/plugin_prod/js/klipse_plugin.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css">

</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<a href="https://beian.miit.gov.cn" target="_blank">湘ICP证019014083号</a>
</div>
</body>
</html>
