<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2022-08-25 Thu 21:34 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>macOS</title>
<meta name="author" content="Honbey Zhang" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="../resources/orgmode.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/style.css" type="text/css"/>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">macOS</h1>
</header>
<div id="outline-container-org04736ee" class="outline-2">
<h2 id="org04736ee">Shortcuts</h2>
<div class="outline-text-2" id="text-org04736ee">
</div>
<div id="outline-container-orge080c1d" class="outline-3">
<h3 id="orge080c1d">Request API and Run JavaScript</h3>
<div class="outline-text-3" id="text-orge080c1d">
<blockquote>
<ol class="org-ol">
<li><a href="https://support.apple.com/en-ie/guide/shortcuts-mac/apd58d46713f/5.0/mac/12.0">https://support.apple.com/en-ie/guide/shortcuts-mac/apd58d46713f/5.0/mac/12.0</a></li>
<li><a href="https://www.reddit.com/r/shortcuts/comments/afbrlh/using_apis_part1_retrieving_data/">https://www.reddit.com/r/shortcuts/comments/afbrlh/using_apis_part1_retrieving_data/</a></li>
</ol>
</blockquote>

<p>
Get API response, the input&rsquo;s type need set to &rsquo;Text&rsquo;, you can set to &rsquo;Dictionary&rsquo; and use If and Get Value to implement it.
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #0000FF;">function</span> <span style="color: #006699;">run</span>(<span style="color: #BA36A5;">input</span>, <span style="color: #BA36A5;">parameters</span>) {
    <span style="color: #0000FF;">let</span> <span style="color: #BA36A5;">response</span> = JSON.parse(input[<span style="color: #D0372D;">0</span>][<span style="color: #D0372D;">0</span>]); <span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">if the input's type is text.</span>
    <span style="color: #0000FF;">let</span> <span style="color: #BA36A5;">result</span> = <span style="color: #008000;">''</span>;
    <span style="color: #0000FF;">if</span> (response.code == <span style="color: #D0372D;">0</span>) {
        result = <span style="color: #008000;">'Successfully!'</span>;
    } <span style="color: #0000FF;">else</span> {
        result = <span style="color: #008000;">'Failed, error: '</span> + response.message;
    }
    <span style="color: #0000FF;">return</span> result;
}
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<a href="https://beian.miit.gov.cn" target="_blank">湘ICP证019014083号</a>
</div>
</body>
</html>
