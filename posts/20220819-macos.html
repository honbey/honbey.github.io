<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2023-02-02 Thu 21:55 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>macOS</title>
<meta name="author" content="Honbey Zhang" />
<meta name="generator" content="Org Mode" />

                     <!--
                     <link rel="stylesheet" href="../resources/orgmode.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/style.css" type="text/css"/>
                     -->
                     <!--
                     <link rel="stylesheet" href="../resources/src/bigblow_theme/css/htmlize.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/src/bigblow_theme/css/bigblow.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/src/bigblow_theme/css/hideshow.css" type="text/css"/>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/jquery-1.11.0.min.js"></script>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/jquery-ui-1.10.2.min.js"></script>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/jquery.localscroll-min.js"></script>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/jquery.scrollTo-1.4.3.1-min.js"></script>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/jquery.zclip.min.js"></script>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/bigblow.js"></script>
                     <script type="text/javascript" src="../resources/src/bigblow_theme/js/hideshow.js"></script>
                     <script type="text/javascript" src="../resources/src/lib/js/jquery.stickytableheaders.min.js"></script>
                     -->
                     <link rel="stylesheet" href="../resources/src/readtheorg_theme/css/htmlize.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/src/readtheorg_theme/css/readtheorg.css" type="text/css"/>
                     <script type="text/javascript" src="../resources/src/lib/js/jquery.min.js"></script>
                     <script type="text/javascript" src="../resources/src/lib/js/bootstrap.min.js"></script>
                     <script type="text/javascript" src="../resources/src/lib/js/jquery.stickytableheaders.min.js"></script>
                     <script type="text/javascript" src="../resources/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">macOS</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org531c053">Finder</a>
<ul>
<li><a href="#org2dd71d9">Remove recent files</a></li>
<li><a href="#orgb0e9d75">The App package is broken</a></li>
</ul>
</li>
<li><a href="#orgd0b9bb5">Shortcuts</a>
<ul>
<li><a href="#orgc3ca72e">Request API and run JavaScript on macOS(JS is not support on iOS yet)</a></li>
</ul>
</li>
<li><a href="#org5166655">Software</a>
<ul>
<li><a href="#org316885c">Sourcetrail</a></li>
</ul>
</li>
<li><a href="#org5ebbae5">Virtual Machine</a>
<ul>
<li><a href="#org1662f0f">Compile open-vm-tools in Debian 10.4 Arm on VMWare Fusion Tech</a></li>
<li><a href="#orgfebba52">Compile Sourcetrail in Debian 10.4 Arm on VMWare Fusion Tech</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div id="outline-container-org531c053" class="outline-2">
<h2 id="org531c053">Finder</h2>
<div class="outline-text-2" id="text-org531c053">
</div>
<div id="outline-container-org2dd71d9" class="outline-3">
<h3 id="org2dd71d9">Remove recent files</h3>
<div class="outline-text-3" id="text-org2dd71d9">
<div class="org-src-container">
<pre class="src src-bash">xattr -c ./*
</pre>
</div>
<p>
<a href="https://github.com/honbey/script/blob/master/linux/mac/remove_recent_used_files_list.sh">remove_recent_used_files_list.sh</a>
</p>
</div>
</div>
<div id="outline-container-orgb0e9d75" class="outline-3">
<h3 id="orgb0e9d75">The App package is broken</h3>
<div class="outline-text-3" id="text-orgb0e9d75">
<div class="org-src-container">
<pre class="src src-bash">sudo xattr -rd com.app.quarantine
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd0b9bb5" class="outline-2">
<h2 id="orgd0b9bb5">Shortcuts</h2>
<div class="outline-text-2" id="text-orgd0b9bb5">
</div>
<div id="outline-container-orgc3ca72e" class="outline-3">
<h3 id="orgc3ca72e">Request API and run JavaScript on macOS(JS is not support on iOS yet)</h3>
<div class="outline-text-3" id="text-orgc3ca72e">
<p>
Documents<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> &amp; Resources<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup>.
</p>

<p>
Get API response, the input&rsquo;s type need set to &rsquo;Text&rsquo;, you can set to &rsquo;Dictionary&rsquo; and use If and Get Value to implement it.
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #0000FF;">function</span> <span style="color: #006699;">run</span>(<span style="color: #BA36A5;">input</span>, <span style="color: #BA36A5;">parameters</span>) {
    <span style="color: #0000FF;">let</span> <span style="color: #BA36A5;">response</span> = JSON.parse(input[<span style="color: #D0372D;">0</span>][<span style="color: #D0372D;">0</span>]); <span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">if the input's type is text.</span>
    <span style="color: #0000FF;">let</span> <span style="color: #BA36A5;">result</span> = <span style="color: #008000;">''</span>;
    <span style="color: #0000FF;">if</span> (response.code == <span style="color: #D0372D;">0</span>) {
        result = <span style="color: #008000;">'Successfully!'</span>;
    } <span style="color: #0000FF;">else</span> {
        result = <span style="color: #008000;">'Failed, error: '</span> + response.message;
    }
    <span style="color: #0000FF;">return</span> result;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5166655" class="outline-2">
<h2 id="org5166655">Software</h2>
<div class="outline-text-2" id="text-org5166655">
</div>
<div id="outline-container-org316885c" class="outline-3">
<h3 id="org316885c">Sourcetrail</h3>
<div class="outline-text-3" id="text-org316885c">
<p>
Compile from source:
</p>
<ol class="org-ol">
<li><p>
Dependencies
</p>
<div class="org-src-container">
<pre class="src src-bash">brew install wget mvn imagemagick boost qt@5 llvm@12
</pre>
</div></li>
<li><p>
Download source code
</p>
<div class="org-src-container">
<pre class="src src-bash">cd ~
git clone https://github.com/CoatiSoftware/Sourcetrail.git
</pre>
</div></li>
<li><p>
Change CMakeLists.txt to find JNI
</p>
<div class="org-src-container">
<pre class="src src-txt"># TODO
if (BUILD_JAVA_LANGUAGE_PACKAGE)
  set(JAVA_INCLUDE_PATH /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/include)
  set(JAVA_INCLUDE_PATH2 /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/include/darwin)
  set(JAVA_AWT_INCLUDE_PATH /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/include)
  set(JAVA_AWT_LIBRARY /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/lib)
  set(JAVA_JVM_LIBRARY /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/lib)

  set(JNI_LIBRARIES
    ${JAVA_AWT_LIBRARY}
    ${JAVA_JVM_LIBRARY}
  )
  set(JNI_INCLUDE_DIRS
    ${JAVA_INCLUDE_PATH}
    ${JAVA_INCLUDE_PATH2}
    ${JAVA_AWT_INCLUDE_PATH}
  )

  # set(JNI_FOUND TRUE)
</pre>
</div></li>
<li><p>
Compile
</p>
<div class="org-src-container">
<pre class="src src-bash">mkdir -p build/Release
cd build/Release

ln -s "$pwd/../../bin/app/data" data

cmake -DCMAKE_BUILD_TYPE=Release \
    -DLLVM_ENABLE_RTTI=ON \
    -DBUILD_CXX_LANGUAGE_PACKAGE=ON \
    -DBUILD_JAVA_LANGUAGE_PACKAGE=ON \
    -DBUILD_PYTHON_LANGUAGE_PACKAGE=ON \
    -DClang_DIR=/opt/homebrew/opt/llvm@12/lib/cmake/clang \
    -DQt5_DIR=/opt/homebrew/opt/qt5/lib/cmake/Qt5 \
    ../..
</pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org5ebbae5" class="outline-2">
<h2 id="org5ebbae5">Virtual Machine</h2>
<div class="outline-text-2" id="text-org5ebbae5">
</div>
<div id="outline-container-org1662f0f" class="outline-3">
<h3 id="org1662f0f">Compile open-vm-tools in Debian 10.4 Arm on VMWare Fusion Tech<sup><a id="fnr.1.100" class="footref" href="#fn.1" role="doc-backlink">1</a></sup></h3>
<div class="outline-text-3" id="text-org1662f0f">
<ol class="org-ol">
<li><p>
Install Dependencies
</p>
<div class="org-src-container">
<pre class="src src-bash">sudo apt install -y autoconf libtool make libmspack-dev libglib2.0-dev libpam0g-dev libssl-dev libxml2-dev libxmlsec1-dev libxinerama-dev libxrandr-dev libxtst-dev libgdk-pixbuf2.0-dev libgtk-3-dev libgtkmm-3.0-dev gcc g++
</pre>
</div></li>

<li><p>
Download source code and compile
</p>
<div class="org-src-container">
<pre class="src src-bash">cd ~
git clone https://github.com/vmware/open-vm-tools.git
cd open-vm-tools
autoconf -i
./configure
make
sudo make install
sudo ldconfig
</pre>
</div></li>

<li><p>
Main starter: touch <code>/etc/rc.local</code> and <code>sudo chmod a+x /etc/rc.local</code>
</p>
<div class="org-src-container">
<pre class="src src-bash">#!/bin/bash

/usr/local/bin/vmtoolsd -b /var/run/open-vm-tools.pid
</pre>
</div></li>

<li><p>
User starter: <code>/etc/xdg/autostart/user-vmtoolsd.desktop</code>
</p>
<div class="org-src-container">
<pre class="src src-bash">[Desktop Entry]
Type=Application
Name=vmtoolsd user launcher
Exec=/usr/local/bin/vmtoolsd -n vmusr --blockFd 3
Icon=system-run
X-GNOME-Autostart-enabled=true
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-orgfebba52" class="outline-3">
<h3 id="orgfebba52">Compile Sourcetrail in Debian 10.4 Arm on VMWare Fusion Tech<sup><a id="fnr.2.100" class="footref" href="#fn.2" role="doc-backlink">2</a></sup></h3>
<div class="outline-text-3" id="text-orgfebba52">
<ol class="org-ol">
<li><p>
Dependencies
</p>
<div class="org-src-container">
<pre class="src src-bash">sudo apt install qtbase5-dev libx11-xcb-dev libudev-dev libinput-dev libts-dev libxcb-xinerama0-dev libxcb-xinerama0 gdbserver libglu1-mesa-dev libxrender-dev libxi-dev libxkbcommon-dev libxkbcommon-x11-dev libx11-xcb-dev libxcb*-dev

sudo apt install libboost-dev libboost-system-dev libboost-program-options-del libboost-program-options-dev libboost-filesystem-dev libboost-date-time-dev

sudo apt install qtbase5-dev libqt5svg5-dev

# TODO: install llvm 11
# deb [arch=arm64] http://apt.llvm.org/buster/ llvm-toolchain-buster-10 main
# deb-src [arch=arm64] http://apt.llvm.org/buster/ llvm-toolchain-buster-10 main
</pre>
</div></li>

<li><p>
Download source and compile
</p>
<div class="org-src-container">
<pre class="src src-bash">cd ~
git clone https://github.com/CoatiSoftware/Sourcetrail.git
cd Sourcetrail
</pre>
</div>
<p>
Change CMakeLists.txt to use Qt 5.11:
</p>
<div class="org-src-container">
<pre class="src src-bash">sed -i 's/5.12.0/5.11.0/' CMakeLists.txt
sed -i 's/0x051200/0x05110/' CMakeLists.txt
</pre>
</div>
<p>
Compile:
</p>
<div class="org-src-container">
<pre class="src src-bash">mkdir -p build/Release
cd build/Release

ln -s "$pwd/../../bin/app/data" data

cmake -DCMAKE_BUILD_TYPE=Release \
    -DLLVM_ENABLE_RTTI=ON \
    -DBUILD_CXX_LANGUAGE_PACKAGE=ON \
    -DBUILD_JAVA_LANGUAGE_PACKAGE=ON \
    -DBUILD_PYTHON_LANGUAGE_PACKAGE=ON \
    -DClang_DIR=/usr/lib/llvm-11/lib/cmake/clang \
    -DQt5_DIR=/usr/lib/aarch64-linux-gnu/cmake/Qt5 \
    ../..
make ARCH=arm -j8 Sourcetrail
</pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://support.apple.com/en-ie/guide/shortcuts-mac/apd58d46713f/5.0/mac/12.0">https://support.apple.com/en-ie/guide/shortcuts-mac/apd58d46713f/5.0/mac/12.0</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://www.reddit.com/r/shortcuts/comments/afbrlh/using_apis_part1_retrieving_data/">https://www.reddit.com/r/shortcuts/comments/afbrlh/using_apis_part1_retrieving_data/</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">

                     Theme
                     <a href="https://github.com/fniessen/org-html-themes" target="_blank">bigblow/readtheorg</a>
                     by
                     <a href="https://github.com/fniessen" target="_blank">fniessen</a>
                     <br>
                     <a href="https://beian.miit.gov.cn" target="_blank">湘ICP证019014083号</a>
</div>
</body>
</html>