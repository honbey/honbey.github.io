<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2023-05-28 Sun 00:55 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>macOS</title>
<meta name="author" content="Honbey Zhang" />
<meta name="generator" content="Org Mode" />

                     <link rel="stylesheet" href="../resources/src/readtheorg_theme/css/htmlize.css" type="text/css"/>
                     <link rel="stylesheet" href="../resources/src/readtheorg_theme/css/readtheorg.css" type="text/css"/>
                     <script type="text/javascript" src="../resources/src/lib/js/jquery.min.js"></script>
                     <script type="text/javascript" src="../resources/src/lib/js/bootstrap.min.js"></script>
                     <script type="text/javascript" src="../resources/src/lib/js/jquery.stickytableheaders.min.js"></script>
                     <script type="text/javascript" src="../resources/src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<header>
<h1 class="title">macOS</h1>
</header><nav id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org0632a91">Finder</a>
<ul>
<li><a href="#org5411a6a">Remove recent files</a></li>
<li><a href="#orgab52dfe">The App package is broken</a></li>
</ul>
</li>
<li><a href="#org2c72038">Shortcuts</a>
<ul>
<li><a href="#org5730e5b">Request API and run JavaScript on macOS(JS is not support on iOS yet)</a></li>
</ul>
</li>
<li><a href="#org9f73ec6">Software</a>
<ul>
<li><a href="#orgd284235">Sourcetrail</a></li>
</ul>
</li>
<li><a href="#orge8f0cd0">Virtual Machine</a>
<ul>
<li><a href="#org7312eda">Compile open-vm-tools in Debian 10.4 Arm on VMWare Fusion Tech</a></li>
<li><a href="#org8a1fc92">Compile Sourcetrail in Debian 10.4 Arm on VMWare Fusion Tech</a></li>
</ul>
</li>
</ul>
</div>
</nav>

<div id="outline-container-org0632a91" class="outline-2">
<h2 id="org0632a91">Finder</h2>
<div class="outline-text-2" id="text-org0632a91">
</div>
<div id="outline-container-org5411a6a" class="outline-3">
<h3 id="org5411a6a">Remove recent files</h3>
<div class="outline-text-3" id="text-org5411a6a">
<div class="org-src-container">
<pre class="src src-bash">xattr -c ./*
</pre>
</div>
<p>
<a href="https://github.com/honbey/script/blob/master/linux/mac/remove_recent_used_files_list.sh">remove_recent_used_files_list.sh</a>
</p>
</div>
</div>
<div id="outline-container-orgab52dfe" class="outline-3">
<h3 id="orgab52dfe">The App package is broken</h3>
<div class="outline-text-3" id="text-orgab52dfe">
<div class="org-src-container">
<pre class="src src-bash">sudo xattr -rd com.app.quarantine
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2c72038" class="outline-2">
<h2 id="org2c72038">Shortcuts</h2>
<div class="outline-text-2" id="text-org2c72038">
</div>
<div id="outline-container-org5730e5b" class="outline-3">
<h3 id="org5730e5b">Request API and run JavaScript on macOS(JS is not support on iOS yet)</h3>
<div class="outline-text-3" id="text-org5730e5b">
<p>
Documents<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> &amp; Resources<sup><a id="fnr.2" class="footref" href="#fn.2" role="doc-backlink">2</a></sup>.
</p>

<p>
Get API response, the input&rsquo;s type need set to &rsquo;Text&rsquo;, you can set to &rsquo;Dictionary&rsquo; and use If and Get Value to implement it.
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #0000FF;">function</span> <span style="color: #006699;">run</span>(<span style="color: #BA36A5;">input</span>, <span style="color: #BA36A5;">parameters</span>) {
    <span style="color: #0000FF;">let</span> <span style="color: #BA36A5;">response</span> = JSON.parse(input[<span style="color: #D0372D;">0</span>][<span style="color: #D0372D;">0</span>]); <span style="color: #8D8D84;">// </span><span style="color: #8D8D84; font-style: italic;">if the input's type is text.</span>
    <span style="color: #0000FF;">let</span> <span style="color: #BA36A5;">result</span> = <span style="color: #008000;">''</span>;
    <span style="color: #0000FF;">if</span> (response.code == <span style="color: #D0372D;">0</span>) {
        result = <span style="color: #008000;">'Successfully!'</span>;
    } <span style="color: #0000FF;">else</span> {
        result = <span style="color: #008000;">'Failed, error: '</span> + response.message;
    }
    <span style="color: #0000FF;">return</span> result;
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9f73ec6" class="outline-2">
<h2 id="org9f73ec6">Software</h2>
<div class="outline-text-2" id="text-org9f73ec6">
</div>
<div id="outline-container-orgd284235" class="outline-3">
<h3 id="orgd284235">Sourcetrail</h3>
<div class="outline-text-3" id="text-orgd284235">
<p>
Compile from source:
</p>
<ol class="org-ol">
<li><p>
Dependencies
</p>
<div class="org-src-container">
<pre class="src src-bash">brew install wget mvn imagemagick boost qt@<span style="color: #D0372D;">5</span> llvm@<span style="color: #D0372D;">12</span>
</pre>
</div></li>
<li><p>
Download source code
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #006FE0;">cd</span> ~
git clone https://github.com/CoatiSoftware/Sourcetrail.git
</pre>
</div></li>
<li><p>
Change CMakeLists.txt to find JNI
</p>
<div class="org-src-container">
<pre class="src src-txt"># TODO
if (BUILD_JAVA_LANGUAGE_PACKAGE)
  set(JAVA_INCLUDE_PATH /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/include)
  set(JAVA_INCLUDE_PATH2 /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/include/darwin)
  set(JAVA_AWT_INCLUDE_PATH /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/include)
  set(JAVA_AWT_LIBRARY /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/lib)
  set(JAVA_JVM_LIBRARY /opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/lib)

  set(JNI_LIBRARIES
    ${JAVA_AWT_LIBRARY}
    ${JAVA_JVM_LIBRARY}
  )
  set(JNI_INCLUDE_DIRS
    ${JAVA_INCLUDE_PATH}
    ${JAVA_INCLUDE_PATH2}
    ${JAVA_AWT_INCLUDE_PATH}
  )

  # set(JNI_FOUND TRUE)
</pre>
</div></li>
<li><p>
Compile
</p>
<div class="org-src-container">
<pre class="src src-bash">mkdir -p build/Release
<span style="color: #006FE0;">cd</span> build/Release

ln -s <span style="color: #008000;">"$pwd/../../bin/app/data"</span> data

cmake -DCMAKE_BUILD_TYPE=Release <span style="color: #008000;">\</span>
    -DLLVM_ENABLE_RTTI=ON <span style="color: #008000;">\</span>
    -DBUILD_CXX_LANGUAGE_PACKAGE=ON <span style="color: #008000;">\</span>
    -DBUILD_JAVA_LANGUAGE_PACKAGE=ON <span style="color: #008000;">\</span>
    -DBUILD_PYTHON_LANGUAGE_PACKAGE=ON <span style="color: #008000;">\</span>
    -DClang_DIR=/opt/homebrew/opt/llvm@12/lib/cmake/clang <span style="color: #008000;">\</span>
    -DQt5_DIR=/opt/homebrew/opt/qt5/lib/cmake/Qt5 <span style="color: #008000;">\</span>
    ../..
</pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="outline-container-orge8f0cd0" class="outline-2">
<h2 id="orge8f0cd0">Virtual Machine</h2>
<div class="outline-text-2" id="text-orge8f0cd0">
</div>
<div id="outline-container-org7312eda" class="outline-3">
<h3 id="org7312eda">Compile open-vm-tools in Debian 10.4 Arm on VMWare Fusion Tech<sup><a id="fnr.1.100" class="footref" href="#fn.1" role="doc-backlink">1</a></sup></h3>
<div class="outline-text-3" id="text-org7312eda">
<ol class="org-ol">
<li><p>
Install Dependencies
</p>
<div class="org-src-container">
<pre class="src src-bash">sudo apt install -y autoconf libtool make libmspack-dev libglib2.0-dev libpam0g-dev libssl-dev libxml2-dev libxmlsec1-dev libxinerama-dev libxrandr-dev libxtst-dev libgdk-pixbuf2.0-dev libgtk-3-dev libgtkmm-3.0-dev gcc g++
</pre>
</div></li>

<li><p>
Download source code and compile
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #006FE0;">cd</span> ~
git clone https://github.com/vmware/open-vm-tools.git
<span style="color: #006FE0;">cd</span> open-vm-tools
autoconf -i
./configure
make
sudo make install
sudo ldconfig
</pre>
</div></li>

<li><p>
Main starter: touch <code>/etc/rc.local</code> and <code>sudo chmod a+x /etc/rc.local</code>
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #8D8D84;">#</span><span style="color: #8D8D84; font-style: italic;">!/bin/</span><span style="color: #0000FF;">bash</span>

/usr/local/bin/vmtoolsd -b /var/run/open-vm-tools.pid
</pre>
</div></li>

<li><p>
User starter: <code>/etc/xdg/autostart/user-vmtoolsd.desktop</code>
</p>
<div class="org-src-container">
<pre class="src src-bash">[Desktop Entry]
<span style="color: #BA36A5;">Type</span>=Application
<span style="color: #BA36A5;">Name</span>=vmtoolsd user launcher
<span style="color: #BA36A5;">Exec</span>=/usr/local/bin/vmtoolsd -n vmusr --blockFd <span style="color: #D0372D;">3</span>
<span style="color: #BA36A5;">Icon</span>=system-run
X-GNOME-Autostart-enabled=true
</pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-org8a1fc92" class="outline-3">
<h3 id="org8a1fc92">Compile Sourcetrail in Debian 10.4 Arm on VMWare Fusion Tech<sup><a id="fnr.2.100" class="footref" href="#fn.2" role="doc-backlink">2</a></sup></h3>
<div class="outline-text-3" id="text-org8a1fc92">
<ol class="org-ol">
<li><p>
Dependencies
</p>
<div class="org-src-container">
<pre class="src src-bash">sudo apt install qtbase5-dev libx11-xcb-dev libudev-dev libinput-dev libts-dev libxcb-xinerama0-dev libxcb-xinerama0 gdbserver libglu1-mesa-dev libxrender-dev libxi-dev libxkbcommon-dev libxkbcommon-x11-dev libx11-xcb-dev libxcb*-dev

sudo apt install libboost-dev libboost-system-dev libboost-program-options-del libboost-program-options-dev libboost-filesystem-dev libboost-date-time-dev

sudo apt install qtbase5-dev libqt5svg5-dev

<span style="color: #8D8D84;"># </span><span style="color: #ffa500; font-weight: bold; font-style: italic;">TODO:</span><span style="color: #8D8D84; font-style: italic;"> install llvm 11</span>
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">deb [arch=arm64] http://apt.llvm.org/buster/ llvm-toolchain-buster-10 main</span>
<span style="color: #8D8D84;"># </span><span style="color: #8D8D84; font-style: italic;">deb-src [arch=arm64] http://apt.llvm.org/buster/ llvm-toolchain-buster-10 main</span>
</pre>
</div></li>

<li><p>
Download source and compile
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #006FE0;">cd</span> ~
git clone https://github.com/CoatiSoftware/Sourcetrail.git
<span style="color: #006FE0;">cd</span> Sourcetrail
</pre>
</div>
<p>
Change CMakeLists.txt to use Qt 5.11:
</p>
<div class="org-src-container">
<pre class="src src-bash">sed -i <span style="color: #008000;">'s/5.12.0/5.11.0/'</span> CMakeLists.txt
sed -i <span style="color: #008000;">'s/0x051200/0x05110/'</span> CMakeLists.txt
</pre>
</div>
<p>
Compile:
</p>
<div class="org-src-container">
<pre class="src src-bash">mkdir -p build/Release
<span style="color: #006FE0;">cd</span> build/Release

ln -s <span style="color: #008000;">"$pwd/../../bin/app/data"</span> data

cmake -DCMAKE_BUILD_TYPE=Release <span style="color: #008000;">\</span>
    -DLLVM_ENABLE_RTTI=ON <span style="color: #008000;">\</span>
    -DBUILD_CXX_LANGUAGE_PACKAGE=ON <span style="color: #008000;">\</span>
    -DBUILD_JAVA_LANGUAGE_PACKAGE=ON <span style="color: #008000;">\</span>
    -DBUILD_PYTHON_LANGUAGE_PACKAGE=ON <span style="color: #008000;">\</span>
    -DClang_DIR=/usr/lib/llvm-11/lib/cmake/clang <span style="color: #008000;">\</span>
    -DQt5_DIR=/usr/lib/aarch64-linux-gnu/cmake/Qt5 <span style="color: #008000;">\</span>
    ../..
make <span style="color: #BA36A5;">ARCH</span>=arm -j8 Sourcetrail
</pre>
</div></li>
</ol>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://support.apple.com/en-ie/guide/shortcuts-mac/apd58d46713f/5.0/mac/12.0">https://support.apple.com/en-ie/guide/shortcuts-mac/apd58d46713f/5.0/mac/12.0</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2" role="doc-backlink">2</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
<a href="https://www.reddit.com/r/shortcuts/comments/afbrlh/using_apis_part1_retrieving_data/">https://www.reddit.com/r/shortcuts/comments/afbrlh/using_apis_part1_retrieving_data/</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">

                     Theme
                     <a href="https://github.com/fniessen/org-html-themes" target="_blank">bigblow/readtheorg</a>
                     by
                     <a href="https://github.com/fniessen" target="_blank">fniessen</a>
                     <br>
                     <a href="https://beian.miit.gov.cn" target="_blank">湘ICP证019014083号</a>
</div>
</body>
</html>